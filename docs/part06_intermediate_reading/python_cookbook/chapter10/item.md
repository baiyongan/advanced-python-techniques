# 模块与包

<!-- -------------------------------------------------------------------------- -->
## 01 构建一个模块的层级包

!!! question "问题"
    如何将代码组织成由很多分层模块构成的包？

    - `__init__.py`

??? done "解决方案"
    在文件系统上组织好代码，并确保每个目录都定义了一个 `__init__.py` 文件，之后，就可以执行相应的 import 语句。

    ```python
    graphics/
        __init__.py
        primitive/
            __init__.py
            line.py
            fill.py
            text.py
        formats/
            __init__.py
            png.py
            jpg.py
    ```

??? summary "讨论"

    文件 `__init__.py` 的目的是要包含不同运行级别的包的可选的初始化代码。举个例子，如果你执行了语句 `import graphics`， 文件 `graphics/__init__.py`将被导入,建立graphics 命名空间的内容。

    绝大部分时候让 `__init__.py` 空着就好。但是有些情况下可能包含代码。 举个例子，能够用 `__init__.py` 来自动加载子模块。
    ```python
    # graphics/formats/__init__.py
    from . import jpg
    from . import png
    ```
    用户可以仅仅通过 import grahpics.formats 来代替 import graphics.formats.jpg 以及 import graphics.formats.png。

    `__init__.py` 的其他常用用法包括将多个文件合并到一个逻辑命名空间

<!-- -------------------------------------------------------------------------- -->
## 02 控制模块被全部导入的内容

!!! question "问题"
    当使用 `from module import *` 语句时，如何对从模块或包导出的符号进行精确控制？

    - 在模块中定义一个变量 `__all__` 来明确指出需要导出的内容。

??? done "解决方案"
    ```python
    # somemodule.py
    def spam():
        pass

    def grok():
        pass

    blah = 42
    # Only export 'spam' and 'grok'
    __all__ = ['spam', 'grok']
    ```

??? summary "讨论"
    - 强烈反对使用 `from module import *` 这种写法，如果不做任何事，这样的方式将会导入所有不以下划线开头的方法。而如果定义了 `__all__`，则只有被其列出的方法才会被导出。

    !!! warning
        如果将 `__all__`定义为空列表，则没有东西会被导入，如果 `__all__` 包含未定义的名字，在导入时，会引起 `AttributeError`。

<!-- -------------------------------------------------------------------------- -->
## 03 使用相对路径名导入包中子模块

!!! question "问题"
    

??? done "解决方案"

??? summary "讨论"


<!-- -------------------------------------------------------------------------- -->
## 04 将模块分割成多个文件

!!! question "问题"

??? done "解决方案"

??? summary "讨论"

<!-- -------------------------------------------------------------------------- -->
## 05 利用命名空间导入目录分散的代码

!!! question "问题"

??? done "解决方案"

??? summary "讨论"


<!-- -------------------------------------------------------------------------- -->
## 06 重新加载模块

!!! question "问题"

??? done "解决方案"

??? summary "讨论"

<!-- -------------------------------------------------------------------------- -->
## 07 运行目录或压缩文件

!!! question "问题"

??? done "解决方案"

??? summary "讨论"

<!-- -------------------------------------------------------------------------- -->
## 08 读取位于包中的数据文件

!!! question "问题"

??? done "解决方案"

??? summary "讨论"

<!-- -------------------------------------------------------------------------- -->
## 09 将文件夹加入到sys.path

!!! question "问题"

??? done "解决方案"

??? summary "讨论"

<!-- -------------------------------------------------------------------------- -->
## 10 通过字符串名导入模块

!!! question "问题"

??? done "解决方案"

??? summary "讨论"

<!-- -------------------------------------------------------------------------- -->
## 11 通过钩子远程加载模块

!!! question "问题"

??? done "解决方案"

??? summary "讨论"

<!-- -------------------------------------------------------------------------- -->
## 12 导入模块的同时修改模块

!!! question "问题"

??? done "解决方案"

??? summary "讨论"

<!-- -------------------------------------------------------------------------- -->
## 13 安装私有的包

!!! question "问题"

??? done "解决方案"

??? summary "讨论"

<!-- -------------------------------------------------------------------------- -->
## 14 创建新的Python环境

!!! question "问题"

??? done "解决方案"

??? summary "讨论"

<!-- -------------------------------------------------------------------------- -->
## 15 分发包

!!! question "问题"

??? done "解决方案"

??? summary "讨论"


<!-- -------------------------------------------------------------------------- -->
## 总结

!!! example "总结"